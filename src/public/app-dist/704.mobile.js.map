{"version":3,"sources":["webpack://trilium/./src/public/app/dialogs/move_to.js"],"names":["$dialog","$","$form","$noteAutoComplete","$noteList","movedBranchIds","async","showDialog","branchIds","val","trigger","empty","branchId","branch","note","noteId","append","text","title","on","notePath","getSelectedPath","modal","parentNoteId","then","parentBranchId","parentBranch","parentNote","getNote","moveNotesTo","console","error"],"mappings":"sMAOA,MAAMA,EAAUC,EAAE,mBACZC,EAAQD,EAAE,iBACVE,EAAoBF,EAAE,8BACtBG,EAAYH,EAAE,sBAEpB,IAAII,EAEGC,eAAeC,EAAWC,GAC7BH,EAAiBG,EAEjB,eAAiBR,GAEjBG,EAAkBM,IAAI,IAAIC,QAAQ,SAElCN,EAAUO,QAEV,IAAK,MAAMC,KAAYP,EAAgB,CACnC,MAAMQ,EAAS,cAAoBD,GAC7BE,QAAa,YAAkBD,EAAOE,QAE5CX,EAAUY,OAAOf,EAAE,QAAQgB,KAAKH,EAAKI,QAGzC,yBAA6Cf,GAC7C,oBAAwCA,GAY5CD,EAAMiB,GAAG,SAAU,KACf,MAAMC,EAAWjB,EAAkBkB,kBAEnC,GAAID,EAAU,CACVpB,EAAQsB,MAAM,QAEd,MAAM,OAACP,EAAM,aAAEQ,GAAgB,qCAA6CH,GAC5E,gBAAsBG,EAAcR,GAAQS,KAAKZ,GAhBzDN,eAA2BmB,SACjB,qBAA+BpB,EAAgBoB,GAErD,MAAMC,EAAe,cAAoBD,GACnCE,QAAmBD,EAAaE,UAEtC,sBAAyB,uCAAuCD,EAAWT,OAUVW,CAAYjB,SAGzEkB,QAAQC,MAAM,uBAGlB,OAAO","file":"704.mobile.js","sourcesContent":["import noteAutocompleteService from \"../services/note_autocomplete.js\";\nimport utils from \"../services/utils.js\";\nimport toastService from \"../services/toast.js\";\nimport treeCache from \"../services/tree_cache.js\";\nimport branchService from \"../services/branches.js\";\nimport treeService from \"../services/tree.js\";\n\nconst $dialog = $(\"#move-to-dialog\");\nconst $form = $(\"#move-to-form\");\nconst $noteAutoComplete = $(\"#move-to-note-autocomplete\");\nconst $noteList = $(\"#move-to-note-list\");\n\nlet movedBranchIds;\n\nexport async function showDialog(branchIds) {\n    movedBranchIds = branchIds;\n\n    utils.openDialog($dialog);\n\n    $noteAutoComplete.val('').trigger('focus');\n\n    $noteList.empty();\n\n    for (const branchId of movedBranchIds) {\n        const branch = treeCache.getBranch(branchId);\n        const note = await treeCache.getNote(branch.noteId);\n\n        $noteList.append($(\"<li>\").text(note.title));\n    }\n\n    noteAutocompleteService.initNoteAutocomplete($noteAutoComplete);\n    noteAutocompleteService.showRecentNotes($noteAutoComplete);\n}\n\nasync function moveNotesTo(parentBranchId) {\n    await branchService.moveToParentNote(movedBranchIds, parentBranchId);\n\n    const parentBranch = treeCache.getBranch(parentBranchId);\n    const parentNote = await parentBranch.getNote();\n\n    toastService.showMessage(`Selected notes have been moved into ${parentNote.title}`);\n}\n\n$form.on('submit', () => {\n    const notePath = $noteAutoComplete.getSelectedPath();\n\n    if (notePath) {\n        $dialog.modal('hide');\n\n        const {noteId, parentNoteId} = treeService.getNoteIdAndParentIdFromNotePath(notePath);\n        treeCache.getBranchId(parentNoteId, noteId).then(branchId => moveNotesTo(branchId));\n    }\n    else {\n        console.error(\"No path to move to.\");\n    }\n\n    return false;\n});\n"],"sourceRoot":""}