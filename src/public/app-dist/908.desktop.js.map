{"version":3,"sources":["webpack://trilium/./src/public/app/dialogs/include_note.js"],"names":["$dialog","$","$form","$autoComplete","textTypeWidget","async","showDialog","widget","val","hideGoToSelectedNoteButton","on","notePath","getSelectedPath","modal","noteId","note","boxSize","type","addImage","addIncludeNote","includeNote","console","error"],"mappings":"kLAKA,MAAMA,EAAUC,EAAE,wBACZC,EAAQD,EAAE,sBACVE,EAAgBF,EAAE,8BAGxB,IAAIG,EAEGC,eAAeC,EAAWC,GAC7BH,EAAiBG,EAEjBJ,EAAcK,IAAI,IAElB,eAAiBR,GAEjB,yBAA6CG,EAAe,CAAEM,4BAA4B,IAC1F,oBAAwCN,GAmB5CD,EAAMQ,GAAG,SAAU,KACf,MAAMC,EAAWR,EAAcS,kBAW/B,OATID,GACAX,EAAQa,MAAM,QApBtBR,eAA2BM,GACvB,MAAMG,EAAS,0BAAkCH,GAC3CI,QAAa,YAAkBD,GAE/BE,EAAUf,EAAE,+CAA+CO,MAE/C,UAAdO,EAAKE,KAGLb,EAAec,SAASJ,GAGxBV,EAAee,eAAeL,EAAQE,GAUtCI,CAAYT,IAGZU,QAAQC,MAAM,0BAGX","file":"908.desktop.js","sourcesContent":["import treeService from '../services/tree.js';\nimport noteAutocompleteService from '../services/note_autocomplete.js';\nimport utils from \"../services/utils.js\";\nimport treeCache from \"../services/tree_cache.js\";\n\nconst $dialog = $(\"#include-note-dialog\");\nconst $form = $(\"#include-note-form\");\nconst $autoComplete = $(\"#include-note-autocomplete\");\n\n/** @var TextTypeWidget */\nlet textTypeWidget;\n\nexport async function showDialog(widget) {\n    textTypeWidget = widget;\n\n    $autoComplete.val('');\n\n    utils.openDialog($dialog);\n\n    noteAutocompleteService.initNoteAutocomplete($autoComplete, { hideGoToSelectedNoteButton: true });\n    noteAutocompleteService.showRecentNotes($autoComplete);\n}\n\nasync function includeNote(notePath) {\n    const noteId = treeService.getNoteIdFromNotePath(notePath);\n    const note = await treeCache.getNote(noteId);\n\n    const boxSize = $(\"input[name='include-note-box-size']:checked\").val();\n\n    if (note.type === 'image') {\n        // there's no benefit to use insert note functionlity for images\n        // so we'll just add an IMG tag\n        textTypeWidget.addImage(noteId);\n    }\n    else {\n        textTypeWidget.addIncludeNote(noteId, boxSize);\n    }\n}\n\n$form.on('submit', () => {\n    const notePath = $autoComplete.getSelectedPath();\n\n    if (notePath) {\n        $dialog.modal('hide');\n\n        includeNote(notePath);\n    }\n    else {\n        console.error(\"No noteId to include.\");\n    }\n\n    return false;\n});"],"sourceRoot":""}