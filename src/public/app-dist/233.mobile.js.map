{"version":3,"sources":["webpack://trilium/./src/public/app/dialogs/branch_prefix.js"],"names":["$dialog","$","$form","$treePrefixInput","$noteTitle","branchId","async","showDialog","notePath","noteId","parentNoteId","branch","type","val","prefix","noteTitle","text","on","modal","savePrefix","trigger"],"mappings":"4LAMA,MAAMA,EAAUC,EAAE,yBACZC,EAAQD,EAAE,uBACVE,EAAmBF,EAAE,wBACrBG,EAAaH,EAAE,6BAErB,IAAII,EAEGC,eAAeC,EAAWC,GAC7B,MAAM,OAACC,EAAM,aAAEC,GAAgB,qCAA6CF,GAE5E,IAAKC,IAAWC,EACZ,OAGJL,QAAiB,gBAAsBK,EAAcD,GACrD,MAAME,EAAS,cAAoBN,GAEnC,IAAKM,GAA4B,SAAlBA,EAAOF,OAClB,OAKJ,GAAwB,kBAFC,YAAkBE,EAAOD,eAEnCE,KACX,OAGJ,eAAiBZ,GAEjBG,EAAiBU,IAAIF,EAAOG,QAE5B,MAAMC,QAAkB,iBAAyBN,GAEjDL,EAAWY,KAAK,MAAQD,GAa5Bb,EAAMe,GAAG,SAAU,KAVnBX,iBACI,MAAMQ,EAASX,EAAiBU,YAE1B,QAAW,YAAcR,EAAW,cAAe,CAAES,OAAQA,IAEnEd,EAAQkB,MAAM,QAEd,sBAAyB,iCAIzBC,IAEO,IAGXnB,EAAQiB,GAAG,iBAAkB,IAAMd,EAAiBiB,QAAQ","file":"233.mobile.js","sourcesContent":["import treeService from '../services/tree.js';\nimport server from '../services/server.js';\nimport treeCache from \"../services/tree_cache.js\";\nimport toastService from \"../services/toast.js\";\nimport utils from \"../services/utils.js\";\n\nconst $dialog = $(\"#branch-prefix-dialog\");\nconst $form = $(\"#branch-prefix-form\");\nconst $treePrefixInput = $(\"#branch-prefix-input\");\nconst $noteTitle = $('#branch-prefix-note-title');\n\nlet branchId;\n\nexport async function showDialog(notePath) {\n    const {noteId, parentNoteId} = treeService.getNoteIdAndParentIdFromNotePath(notePath);\n\n    if (!noteId || !parentNoteId) {\n        return;\n    }\n\n    branchId = await treeCache.getBranchId(parentNoteId, noteId);\n    const branch = treeCache.getBranch(branchId);\n\n    if (!branch || branch.noteId === 'root') {\n        return;\n    }\n\n    const parentNote = await treeCache.getNote(branch.parentNoteId);\n\n    if (parentNote.type === 'search') {\n        return;\n    }\n\n    utils.openDialog($dialog);\n\n    $treePrefixInput.val(branch.prefix);\n\n    const noteTitle = await treeService.getNoteTitle(noteId);\n\n    $noteTitle.text(\" - \" + noteTitle);\n}\n\nasync function savePrefix() {\n    const prefix = $treePrefixInput.val();\n\n    await server.put('branches/' + branchId + '/set-prefix', { prefix: prefix });\n\n    $dialog.modal('hide');\n\n    toastService.showMessage(\"Branch prefix has been saved.\");\n}\n\n$form.on('submit', () => {\n    savePrefix();\n\n    return false;\n});\n\n$dialog.on('shown.bs.modal', () => $treePrefixInput.trigger('focus'));"],"sourceRoot":""}