(window.webpackJsonptrilium=window.webpackJsonptrilium||[]).push([[761],{761:(t,o,e)=>{"use strict";e.r(o),e.d(o,{default:()=>s});var a=e(800),n=e(46);let r;class s{constructor(){$("#options-keyboard-shortcuts").html('\n<h4>Keyboard shortcuts</h4>\n\n<p>Multiple shortcuts for the same action can be separated by comma.</p>\n\n<div class="form-group">\n    <input type="text" class="form-control" id="keyboard-shortcut-filter" placeholder="Type text to filter shortcuts...">\n</div>\n\n<div style="overflow: auto; height: 500px;">\n    <table id="keyboard-shortcut-table" cellpadding="10">\n    <thead>\n        <tr>\n            <th>Action name</th>\n            <th>Shortcuts</th>\n            <th>Default shortcuts</th>\n            <th>Description</th>\n        </tr>\n    </thead>\n    <tbody></tbody>\n    </table>\n</div>\n\n<div style="display: flex; justify-content: space-between">\n    <button class="btn btn-primary" id="options-keyboard-shortcuts-reload-app">Reload app to apply changes</button>\n    \n    <button class="btn" id="options-keyboard-shortcuts-set-all-to-default">Set all shortcuts to the default</button>\n</div>\n'),$("#options-keyboard-shortcuts-reload-app").on("click",()=>n.Z.reloadApp());const t=$("#keyboard-shortcut-table tbody");a.Z.get("keyboard-actions").then(o=>{r=o;for(const e of o){const o=$("<tr>");e.separator?o.append($('<td colspan="4">').attr("style","background-color: var(--accented-background-color); font-weight: bold;").text(e.separator)):o.append($("<td>").text(e.actionName)).append($("<td>").append($('<input type="text" class="form-control">').val(e.effectiveShortcuts.join(", ")).attr("data-keyboard-action-name",e.actionName).attr("data-default-keyboard-shortcuts",e.defaultShortcuts.join(", ")))).append($("<td>").text(e.defaultShortcuts.join(", "))).append($("<td>").text(e.description)),t.append(o)}}),t.on("change","input.form-control",t=>{const o=$(t.target),e=o.attr("data-keyboard-action-name"),n=o.val().replace("+,","+Comma").split(",").map(t=>t.replace("+Comma","+,")).filter(t=>!!t),r={};r["keyboardShortcuts"+e]=JSON.stringify(n),a.Z.put("options",r)}),$("#options-keyboard-shortcuts-set-all-to-default").on("click",async()=>{const o=await e.e(590).then(e.bind(e,590));await o.confirm("Do you really want to reset all keyboard shortcuts to the default?")&&t.find("input.form-control").each((function(){const t=$(this).attr("data-default-keyboard-shortcuts");$(this).val()!==t&&$(this).val(t).trigger("change")}))});const o=$("#keyboard-shortcut-filter");o.on("keyup",()=>{const e=o.val().trim().toLowerCase();t.find("tr").each((t,o)=>{if(!e)return void $(o).show();const a=$(o).find("input").attr("data-keyboard-action-name");if(!a)return void $(o).hide();const n=r.find(t=>t.actionName===a);n?$(o).toggle(!!(n.actionName.toLowerCase().includes(e)||n.defaultShortcuts.some(t=>t.toLowerCase().includes(e))||n.effectiveShortcuts.some(t=>t.toLowerCase().includes(e))||n.description&&n.description.toLowerCase().includes(e))):$(o).hide()})})}}}}]);
//# sourceMappingURL=761.setup.js.map