{"version":3,"sources":["webpack://trilium/./src/public/app/dialogs/confirm.js"],"names":["$dialog","$","$confirmContent","$okButton","$cancelButton","$custom","resolve","$originallyFocused","confirm","message","hide","glob","activeDialog","text","empty","append","modal","Promise","res","rej","confirmDeleteNoteBoxWithNote","title","addClass","attr","html","show","isDeleteNoteChecked","length","doResolve","ret","on","trigger"],"mappings":"+LAAA,MAAMA,EAAUC,EAAE,mBACZC,EAAkBD,EAAE,2BACpBE,EAAYF,EAAE,6BACdG,EAAgBH,EAAE,iCAClBI,EAAUJ,EAAE,0BAIlB,IAAIK,EACAC,EAEG,SAASC,EAAQC,GAepB,OAdAF,EAAqBN,EAAE,UAEvBI,EAAQK,OAERC,KAAKC,aAAeZ,EAEG,iBAAZS,IACPA,EAAUR,EAAE,SAASY,KAAKJ,IAG9BP,EAAgBY,QAAQC,OAAON,GAE/BT,EAAQgB,QAED,IAAIC,QAAQ,CAACC,EAAKC,KAAUb,EAAUY,IAG1C,SAASE,EAA6BC,GAsBzC,OArBAV,KAAKC,aAAeZ,EAEpBE,EAAgBW,KAAK,6CAA6CQ,yBAElEhB,EAAQS,QACHC,OAAO,SACPA,OAAOd,EAAE,SAASqB,SAAS,cACvBP,OAAOd,EAAE,WACLsB,KAAK,KAhCQ,8BAiCbA,KAAK,OAAQ,YACbD,SAAS,qBACbP,OAAOd,EAAE,WACLsB,KAAK,MApCQ,8BAqCbD,SAAS,oBACTC,KAAK,QAAS,2CACdA,KAAK,QAAS,kGACdC,KAAK,sBAClBnB,EAAQoB,OAERzB,EAAQgB,QAED,IAAIC,QAAQ,CAACC,EAAKC,KAAUb,EAAUY,IAG1C,SAASQ,IACZ,OAAOzB,EAAE,uCAA0C0B,OAAS,EAgBhE,SAASC,EAAUC,GACfvB,EAAQuB,GACRvB,EAAU,KAEVN,EAAQgB,MAAM,QAjBlBhB,EAAQ8B,GAAG,iBAAkB,IAAM3B,EAAU4B,QAAQ,UAErD/B,EAAQ8B,GAAG,kBAAmB,KACtBxB,GACAA,GAAQ,GAGRC,IACAA,EAAmBwB,QAAQ,SAC3BxB,EAAqB,QAW7BH,EAAc0B,GAAG,QAAS,IAAMF,GAAU,IAC1CzB,EAAU2B,GAAG,QAAS,IAAMF,GAAU","file":"590.mobile.js","sourcesContent":["const $dialog = $(\"#confirm-dialog\");\nconst $confirmContent = $(\"#confirm-dialog-content\");\nconst $okButton = $(\"#confirm-dialog-ok-button\");\nconst $cancelButton = $(\"#confirm-dialog-cancel-button\");\nconst $custom = $(\"#confirm-dialog-custom\");\n\nconst DELETE_NOTE_BUTTON_ID = \"confirm-dialog-delete-note\";\n\nlet resolve;\nlet $originallyFocused; // element focused before the dialog was opened so we can return to it afterwards\n\nexport function confirm(message) {\n    $originallyFocused = $(':focus');\n\n    $custom.hide();\n\n    glob.activeDialog = $dialog;\n\n    if (typeof message === 'string') {\n        message = $(\"<div>\").text(message);\n    }\n\n    $confirmContent.empty().append(message);\n\n    $dialog.modal();\n\n    return new Promise((res, rej) => { resolve = res; });\n}\n\nexport function confirmDeleteNoteBoxWithNote(title) {\n    glob.activeDialog = $dialog;\n\n    $confirmContent.text(`Are you sure you want to remove the note \"${title}\" from relation map?`);\n\n    $custom.empty()\n        .append(\"<br/>\")\n        .append($(\"<div>\").addClass(\"form-check\")\n            .append($(\"<input>\")\n                .attr(\"id\", DELETE_NOTE_BUTTON_ID)\n                .attr(\"type\", \"checkbox\")\n                .addClass(\"form-check-input\"))\n            .append($(\"<label>\")\n                .attr(\"for\", DELETE_NOTE_BUTTON_ID)\n                .addClass(\"form-check-label\")\n                .attr(\"style\", \"text-decoration: underline dotted black\")\n                .attr(\"title\", \"If you don't check this, note will be only removed from relation map, but will stay as a note.\")\n                .html(\"Also delete note\")));\n    $custom.show();\n\n    $dialog.modal();\n\n    return new Promise((res, rej) => { resolve = res; });\n}\n\nexport function isDeleteNoteChecked() {\n    return $(\"#\" + DELETE_NOTE_BUTTON_ID + \":checked\").length > 0;\n}\n\n$dialog.on('shown.bs.modal', () => $okButton.trigger(\"focus\"));\n\n$dialog.on(\"hidden.bs.modal\", () => {\n    if (resolve) {\n        resolve(false);\n    }\n\n    if ($originallyFocused) {\n        $originallyFocused.trigger('focus');\n        $originallyFocused = null;\n    }\n});\n\nfunction doResolve(ret) {\n    resolve(ret);\n    resolve = null;\n\n    $dialog.modal(\"hide\");\n}\n\n$cancelButton.on('click', () => doResolve(false));\n$okButton.on('click', () => doResolve(true));"],"sourceRoot":""}